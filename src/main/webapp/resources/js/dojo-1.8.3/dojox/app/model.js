//>>built
define("dojox/app/model",["dojo/_base/lang","dojo/Deferred","dojo/when"],function(j,f,k){function m(b,a,d,g,c){var h=b[a].params?b[a].params:{},l=new f;require([b[a].modelLoader?b[a].modelLoader:"dojox/app/utils/simpleModel"],function(a){l.resolve(a)});var e=new f;return k(l,j.hitch(this,function(d){var i;try{i=d(b,h,a)}catch(f){return e.reject("load model error in model.",f),e.promise}if(i.then)return k(i,j.hitch(this,function(b){c[a]=b;this.app.log("in app/model, for item=[",a,"] loadedModels =",
c);this.defCount--;0==this.defCount&&g.resolve(c);e.resolve(c);return c}),function(){e.reject("load model error in models.")}),e;c[a]=i;this.app.log("in app/model else path, for item=[",a,"] loadedModels=",c);this.defCount--;0==this.defCount&&g.resolve(c);e.resolve(c);return c}))}return function(b,a,d){this.app=d||a;this.defCount=0;var d={},g=new f;a.loadedModels&&j.mixin(d,a.loadedModels);if(b){for(var c in b)"_"!==c.charAt(0)&&this.defCount++;if(0==this.defCount)return d;for(var h in b)"_"!==h.charAt(0)&&
m(b,h,a,g,d);return g}return d}});